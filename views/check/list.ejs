<!DOCTYPE html>
<html lang="en">
  <%- include("../header"); %>
<body>
  <%- include("../menu"); %>
  <!-- Table with panel -->
  <div class=""  style="height: 100%; background-image: linear-gradient(45deg, rgba(155, 11, 44, 0.6), rgba(12, 14, 173, 0.69) 100%);">
<div id="check-table" class="container align-items-center" style="height: 100%;  padding: 5vh 0">

  <!--Card image-->
  <div
    class="view-cascade gradient-card-header purple-gradient narrower py-2 mx-4 mb-3 d-flex justify-content-between align-items-center">

    <div>
      <button type="button" class="btn btn-outline-white btn-rounded btn-sm px-2">
        <i class="fas fa-th-large mt-0"></i>
      </button>
      <button type="button" class="btn btn-outline-white btn-rounded btn-sm px-2">
        <i class="fas fa-columns mt-0"></i>
      </button>
    </div>

    <a href="" class="white-text mx-3">Table name</a>

    <div>
      <button type="button" class="btn btn-outline-white btn-rounded btn-sm px-2">
        <i class="fas fa-pencil-alt mt-0"></i>
      </button>
      <button type="button" class="btn btn-outline-white btn-rounded btn-sm px-2">
        <i class="far fa-trash-alt mt-0"></i>
      </button>
      <button type="button" class="btn btn-outline-white btn-rounded btn-sm px-2">
        <i class="fas fa-info-circle mt-0"></i>
      </button>
    </div>

  </div>
  <!--/Card image-->

  <div class="px-5" style="background-color: rgba(210,210,210,0.7); height:90%">
    <div class="table-wrapper">
      <!--Table-->
      <table class="table table-hover mb-0">

        <!--Table head-->
        <thead>
          <tr>
            <th>
              <input class="form-check-input" type="checkbox" id="checkbox_all">
              <label class="form-check-label" for="checkbox" class="mr-2 label-table"></label>
            </th>
            <th class="th-lg">
              <a>Name
                <i class="fas fa-sort ml-1"></i>
              </a>
            </th>
            <th class="th-lg">
              <a href="">class
                <i class="fas fa-sort ml-1"></i>
              </a>
            </th>
            <th class="th-lg">
              <a href="">age
                <i class="fas fa-sort ml-1"></i>
              </a>
            </th>
            <th class="th-lg">
              <a href="">tel
                <i class="fas fa-sort ml-1"></i>
              </a>
            </th>
          </tr>
        </thead>
        <!--Table head-->
        <!--Table body-->
        <tbody>
          
    <% result.forEach(student => { %>
          <tr>
            <th scope="row">
              <input class="form-check-input" type="checkbox" id="checkbox" onclick="myFunction()">
              <label class="form-check-label" for="checkbox" class="label-table"></label>
            </th>
            <td><%= student.name %></td>
            <td><%= student.cls %></td>
            <td><%= student.age %></td>
            <td><%= student.tel %></td>
          </tr>
          
    <% }) %>
        </tbody>
        <!--Table body-->
      </table>
      <!--Table-->
    </div>
  </div>
</div>
</div>
  <%- include("../footer"); %>
  <style>
    
  *{
    box-sizing: border-box;
  }
  </style>
<script>
  $(function myFunction() {
        event.preventDefault();

        const check= $("#check").val();
        var checkbox = document.getElementById("checkbox");
        if (checkbox.checked==true){
          check = false;
        }
        else check = true;

        $.ajax({
            url: "/api/student/<%= result.id%>", 
            type: "POST",
            data: { check },
        })
        //.done(() => {                             //  성공
        //    location.href = "/api/student/<%= result.id%>";
        //})
        .fail((request, status, error) => {       //  실패
            alert(request.responseText);
        });
    });
</script>
</body>
</html>
